<img src="pic/mysql.png" width=500 />

##### 连接器：

 ```mysql
负责跟客户端建立连接、获取权限、维持和管理连接

show processlist;
Sleep: 连接完成后，如果没有后续动作，这个连接就处于空闲状态,客户端如果太长时间没动静，连接器就会自动将它断开。这个时间是由参数 wait_timeout 控制的，默认值8小时

MySQL在执行过程中临时使用的内存是管理在连接对象里面的。这些资源会在连接断开的时候才释放。
​所以如果长连接累积下来，可能导致内存占用太大，被系统强行kill掉（OOM），从现象看就是MySQL异常重启了。
 ```

##### 查询缓存

```mysql
8.0版本已将该模块下线，因为缓存失效非常频繁，如修改某张表，表上的所有查询都会失效；因此，除非业务实例只有一张静态表，不然不建议开启查询缓存

配置：my.cnf 中的query_cache_type=0/1/2
0时表示关闭，1时表示打开，2表示只要select 中明确指定SQL_CACHE才缓存
```

##### 分析器：

```mysql
如果查询语句没有在查询缓存中命中，就开始到了分析器

词法分析：分析sql中每个单词代表什么意思，比如 select * from table1；select代表查询，*代表所有字段，from table1代表从table1查询

语法分析：在词法分析的基础上，分析整个sql语句是否符合语法
```

##### 优化器：

```mysql  
生成执行计划，索引选择

比如一个查询语句，如果表中有多个索引，那么优化器可能会选择一个相对合适的索引进行查询
当然，也可能没走索引进行全表扫描，也可能选错了索引，具体要通过explain语句检查分析下
```

##### 执行器

```mysql
操作存储引擎，返回结果
```





